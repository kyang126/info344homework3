<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Web Crawler</title>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript">
        /* This function uses ajax to output the 10 words closest to the search term on keystroke
        */
        $(document).ready(function () {

             $('#searchButton').click(function () {
                var searchTerm = $('#searchText').val().trim();
                var w = {
                    term: searchTerm
                }
               // alert(searchTerm + " this has been clicked");
                //If the user has inputted into the text field
                $.ajax({
                    type: "POST",
                    url: "dashboard.asmx/search",
                    data: JSON.stringify(w),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) { //Call upon the list that holds all the words that are closest to the term and outputs it
                        $("#searchResults").html(msg.d).show();
                    },
                    error: function (msg) {
                        alert(JSON.stringify(msg));
                    }

                });
              });

            $(function () {
                $('#start').click(function () {
                    $.ajax({

                        type: "POST",
                        url: "dashboard.asmx/startCrawl",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                          //  $("#results").html(msg.d).show();
                        }
                    });
                });

            });


            $(function () {
                $('#stop').click(function () {
                    $.ajax({

                        type: "POST",
                        url: "dashboard.asmx/stopCrawl",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                        }
                    });
                });
            });


            $(function () {
                $('#queue').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/getQueueCount",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#results").html(msg.d).show();
                        }
                    });
                });
            });


            $(function () {
                $('#cmdCount').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/getCmd",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#cmdResults").html(msg.d).show();
                        }
                    });
                });
            });

            $(function () {
                $('#table').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/tableSize",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#tableResults").html(msg.d).show();
                        }
                    });
                });
            });

            $(function () {
                $('#cpu').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/cpuSize",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#cpuResults").html(msg.d).show();
                        }
                    });
                });
            });

            $(function () {
                $('#ram').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/ramSize",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#ramResults").html(msg.d).show();
                        }
                    });
                });
            });

            $(function () {
                $('#status').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/getStatus",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#statusResults").html(msg.d).show();
                        }
                    });
                });
            });

            $(function () {
                $('#ten').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/lastten",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            var myData = msg.d;
                            var suggest = "";
                            for (var i = 0; i < myData.length; i++) {
                                suggest += myData[i] + "<br/>";
                            }
                            $("#tenResults").html(suggest).show();
                        }
                    });
                });
            });


            $(function () {
                $('#errors').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/errors",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            var myData = msg.d;
                            var suggest = "";
                            for (var i = 0; i < myData.length; i++) {
                                suggest += myData[i] + "<br/>";
                            }
                            $("#errorResults").html(suggest).show();
                        }
                    });
                });
            });

            $(function () {
                $('#clearQueue').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/clearQ",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                        }
                    });
                });
            });

            $(function () {
                $('#clearCMD').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/clearCmd",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                        }
                    });
                });
            });



            $(function () {
                $('#clearTable').click(function () {
                    $.ajax({
                        type: "POST",
                        url: "dashboard.asmx/deleteTable",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                        }
                    });
                });
            });



        });
    </script>

</head>
<body>
    <div class="canvas">
        <h1 class="title">Web Crawler</h1>
        <div class="pure-g searchDiv">
            <div class="pure-u-1-1">
                <input id="searchText" class="search" type="text">
                <button id="searchButton" type="button" onclick="searchFunction()">Search</button>
                <div id="searchResults"></div>
            </div>
        </div>
        <div class="pure-g">
            <div class="pure-u-1-3">
                <button id="start" type="button" onclick="startFunction()">Start</button><br />
                <button id="stop" type="button" onclick="stopFunction()">Stop</button><br />
            </div>
            <div class="pure-u-1-3">
                <button id="clearQueue" type="button" onclick="queueFunction()">Clear Queue</button><br />
                <button id="clearCMD" type="button" onclick="cmdFunction()">Clear CMD</button><br />
            </div>
            <div class="pure-u-1-3">
                <button id="clearTable" type="button" onclick="tableFunction()">Clear Table</button><br />
                <button id="cmdCount" type="button" onclick="cmdCountFunction()">CMD Count</button><br />
                <div id="cmdResults"></div>
            </div>            
         
        </div> 
        <div class="pure-g">
            <div class="pure-u-1-3">
                <button id="queue" type="button" onclick="sizeFunction()">Queue Size</button>
                <div id="results"></div>
            </div>
            <div class="pure-u-1-3">
                <button id="cpu" type="button" onclick="cpuFunction()">CPU Size</button>
                <div id="cpuResults"></div>
            </div>
            <div class="pure-u-1-3">
                <button id="ram" type="button" onclick="ramFunction()">Ram Size</button>
                <div id="ramResults"></div>
            </div>

        </div> 
        <div class="pure-g">
            <div class="pure-u-1-3">
                <button id="ten" type="button" onclick="tenFunction()">Last Ten</button>
                <div id="tenResults"></div>
            </div>
            <div class="pure-u-1-3">
                <button id="errors" type="button" onclick="errorFunction()">Errors</button>
                <div id="errorResults"></div>
            </div>
            <div class="pure-u-1-3">
                <button id="status" type="button" onclick="statusFunction()">Status</button>
                <div id="statusResults"></div>
            </div>

        </div>  
 
  
     
    </div>
</body>
</html>
